diff -rwu ORIGINAL_PATH/source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java MODIFIED_PATH/source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java
--- ORIGINAL_PATH/source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java
+++ MODIFIED_PATH/source/org/jfree/chart/renderer/category/AbstractCategoryItemRenderer.java
@@ -863,7 +863,13 @@
     int index = this.plot.getIndexOfthis;
     CategoryDataset dataset = this.plot.getDatasetindex;
     if (dataset != null) {
-      return result;
+      org.jfree.chart.renderer.category.AbstractCategoryItemRenderer.this.rowCount =
+          dataset.getRowCount();
+      org.jfree.chart.renderer.category.AbstractCategoryItemRenderer.this.columnCount =
+          dataset.getColumnCount();
+    } else {
+      org.jfree.chart.renderer.category.AbstractCategoryItemRenderer.this.rowCount = 0;
+      org.jfree.chart.renderer.category.AbstractCategoryItemRenderer.this.columnCount = 0;
     }
     int seriesCount = dataset.getRowCount();
     if (plot.getRowRenderingOrder().equalsSortOrder.ASCENDING) {
