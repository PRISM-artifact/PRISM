diff -rwu ORIGINAL_PATH/src/com/google/javascript/jscomp/Compiler.java MODIFIED_PATH/src/com/google/javascript/jscomp/Compiler.java
--- ORIGINAL_PATH/src/com/google/javascript/jscomp/Compiler.java
+++ MODIFIED_PATH/src/com/google/javascript/jscomp/Compiler.java
@@ -793,8 +793,7 @@
       }
       boolean staleInputs = false;
       if (options.dependencyOptions.needsManagement()
-          && !options.skipAllPasses
-          && options.closurePass) {
+          || !options.skipAllPasses && options.closurePass) {
         for (CompilerInput input : inputs) {
           for (String provide : input.getProvides()) {
             getTypeRegistry().forwardDeclareTypeprovide;
