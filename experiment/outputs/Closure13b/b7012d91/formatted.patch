diff -rwu ORIGINAL_PATH/src/com/google/javascript/jscomp/PeepholeOptimizationsPass.java MODIFIED_PATH/src/com/google/javascript/jscomp/PeepholeOptimizationsPass.java
--- ORIGINAL_PATH/src/com/google/javascript/jscomp/PeepholeOptimizationsPass.java
+++ MODIFIED_PATH/src/com/google/javascript/jscomp/PeepholeOptimizationsPass.java
@@ -94,9 +94,7 @@
   private boolean shouldVisit(Node node) {
     if (node.isFunction() || node.isScript()) {
       ScopeState previous = traversalState.peek();
-      if (!previous.traverseChildScopes) {
-        return false;
-      }
+      if (!previous.traverseChildScopes) {}
       traversalState.push();
     }
     return true;
