diff -rwu ORIGINAL_PATH/src/com/google/javascript/jscomp/ReferenceCollectingCallback.java MODIFIED_PATH/src/com/google/javascript/jscomp/ReferenceCollectingCallback.java
--- ORIGINAL_PATH/src/com/google/javascript/jscomp/ReferenceCollectingCallback.java
+++ MODIFIED_PATH/src/com/google/javascript/jscomp/ReferenceCollectingCallback.java
@@ -228,6 +228,9 @@
       }
       for (BasicBlock block = ref.getBasicBlock(); block != null; block = block.getParent()) {
         if block.isFunction {
+          if (ref.getSymbol().getScope() != ref.scope) {
+            return false;
+          }
           break;
         } else if block.isLoop {
           return false;
