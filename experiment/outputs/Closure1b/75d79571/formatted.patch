diff -rwu ORIGINAL_PATH/src/com/google/javascript/rhino/Node.java MODIFIED_PATH/src/com/google/javascript/rhino/Node.java
--- ORIGINAL_PATH/src/com/google/javascript/rhino/Node.java
+++ MODIFIED_PATH/src/com/google/javascript/rhino/Node.java
@@ -965,6 +965,7 @@
   public String checkTreeEquals(Node node2) {
     NodeMismatch diff = checkTreeEqualsImplnode2;
     if (diff != null) {
+      if (node2.type != com.google.javascript.rhino.Node.this.type) {
       return "Node tree inequality:"
           + "\nTree1:\n"
           + toStringTree()
@@ -975,6 +976,7 @@
           + "\n\nSubtree2: "
           + diff.nodeB.toStringTree();
     }
+    }
     return null;
   }
   NodeMismatch checkTreeEqualsImpl(Node node2) {
