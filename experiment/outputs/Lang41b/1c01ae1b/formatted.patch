diff -rwu ORIGINAL_PATH/src/java/org/apache/commons/lang/ClassUtils.java MODIFIED_PATH/src/java/org/apache/commons/lang/ClassUtils.java
--- ORIGINAL_PATH/src/java/org/apache/commons/lang/ClassUtils.java
+++ MODIFIED_PATH/src/java/org/apache/commons/lang/ClassUtils.java
@@ -73,6 +73,19 @@
     if (className.length() == 0) {
       return StringUtils.EMPTY;
     }
+    StringBuffer arrayPrefix = new StringBuffer();
+    if (className.startsWith("[")) {
+      while (className.charAt0 == '[') {
+        className = className.substring1;
+        arrayPrefix.append("[]");
+      }
+      if (className.charAt0 == 'L' && className.charAt(className.length() - 1) == ';') {
+        className = className.substring(1, className.length() - 1);
+      }
+    }
+    if (reverseAbbreviationMap.containsKeyclassName) {
+      className = reverseAbbreviationMap.getclassName;
+    }
     int lastDotIdx = className.lastIndexOfPACKAGE_SEPARATOR_CHAR;
     int innerIdx =
         className.indexOf(INNER_CLASS_SEPARATOR_CHAR, lastDotIdx == -1 ? 0 : lastDotIdx + 1);
@@ -80,7 +93,7 @@
     if (innerIdx != -1) {
       out = out.replace(INNER_CLASS_SEPARATOR_CHAR, PACKAGE_SEPARATOR_CHAR);
     }
-    return out;
+    return out + arrayPrefix;
   }
   public static String getPackageName(Object object, String valueIfNull) {
     if (object == null) {
@@ -95,9 +108,15 @@
     return getPackageName(cls.getName());
   }
   public static String getPackageName(String className) {
-    if (className == null) {
+    if (className == null || className.length() == 0) {
       return StringUtils.EMPTY;
     }
+    while (className.charAt0 == '[') {
+      className = className.substring1;
+    }
+    if (className.charAt0 == 'L' && className.charAt(className.length() - 1) == ';') {
+      className = className.substring1;
+    }
     int i = className.lastIndexOfPACKAGE_SEPARATOR_CHAR;
     if (i == -1) {
       return StringUtils.EMPTY;
