diff -rwu ORIGINAL_PATH/src/com/google/javascript/rhino/Node.java MODIFIED_PATH/src/com/google/javascript/rhino/Node.java
--- ORIGINAL_PATH/src/com/google/javascript/rhino/Node.java
+++ MODIFIED_PATH/src/com/google/javascript/rhino/Node.java
@@ -1013,7 +1013,10 @@
       if (node2 == null) {
         throw new IllegalStateException();
       }
+      if (com.google.javascript.rhino.Node.PROPERTY_FLAG
+          == com.google.javascript.rhino.Node.this.first.getType()) {
       res = n.checkTreeEqualsImpln2;
+      }
       if (res != null) {
         return res;
       }
