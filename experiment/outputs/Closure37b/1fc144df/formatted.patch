diff -rwu ORIGINAL_PATH/src/com/google/javascript/jscomp/NodeTraversal.java MODIFIED_PATH/src/com/google/javascript/jscomp/NodeTraversal.java
--- ORIGINAL_PATH/src/com/google/javascript/jscomp/NodeTraversal.java
+++ MODIFIED_PATH/src/com/google/javascript/jscomp/NodeTraversal.java
@@ -271,7 +271,7 @@
     final Node args = fnName.getNext();
     final Node body = args.getNext();
     traverseBranch(args, n);
-    Preconditions.checkState(body.getNext() == null && body.isBlock());
+    Preconditions.checkState(body.getNext() == null && body.isBlock(), body);
     traverseBranch(body, n);
     popScope();
   }
diff -rwu ORIGINAL_PATH/src/com/google/javascript/jscomp/parsing/IRFactory.java MODIFIED_PATH/src/com/google/javascript/jscomp/parsing/IRFactory.java
--- ORIGINAL_PATH/src/com/google/javascript/jscomp/parsing/IRFactory.java
+++ MODIFIED_PATH/src/com/google/javascript/jscomp/parsing/IRFactory.java
@@ -377,6 +377,10 @@
       }
       node.addChildToBacklp;
       Node bodyNode = transform(functionNode.getBody());
+      if (!bodyNode.isBlock()) {
+        Preconditions.checkStateconfig.isIdeMode;
+        bodyNode = IR.block();
+      }
       parseDirectivesbodyNode;
       node.addChildToBackbodyNode;
       return node;
