diff -rwu ORIGINAL_PATH/source/org/jfree/data/category/DefaultIntervalCategoryDataset.java MODIFIED_PATH/source/org/jfree/data/category/DefaultIntervalCategoryDataset.java
--- ORIGINAL_PATH/source/org/jfree/data/category/DefaultIntervalCategoryDataset.java
+++ MODIFIED_PATH/source/org/jfree/data/category/DefaultIntervalCategoryDataset.java
@@ -70,8 +70,8 @@
           this.categoryKeys = generateKeys(categoryCount, prefix);
         }
       } else {
-        this.seriesKeys = null;
-        this.categoryKeys = null;
+        this.seriesKeys = new Comparable[0];
+        this.categoryKeys = new Comparable[0];
       }
     }
   }
@@ -128,7 +128,7 @@
     if (categoryKeys == null) {
       throw new IllegalArgumentException("Null 'categoryKeys' argument.");
     }
-    if (categoryKeys.length != this.startData[0].length) {
+    if (categoryKeys.length != getCategoryCount()) {
       throw new IllegalArgumentException("The number of categories does not match the data.");
     }
     for (int i = 0; i < categoryKeys.length; i++) {
