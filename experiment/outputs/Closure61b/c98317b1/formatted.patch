diff -rwu ORIGINAL_PATH/src/com/google/javascript/rhino/Node.java MODIFIED_PATH/src/com/google/javascript/rhino/Node.java
--- ORIGINAL_PATH/src/com/google/javascript/rhino/Node.java
+++ MODIFIED_PATH/src/com/google/javascript/rhino/Node.java
@@ -1054,6 +1054,7 @@
   public String checkTreeEquals(Node node2) {
     NodeMismatch diff = checkTreeEqualsImplnode2;
     if (diff != null) {
+      if (com.google.javascript.rhino.Node.this.type != node2.type) {
       return "Node tree inequality:"
           + "\nTree1:\n"
           + toStringTree()
@@ -1064,6 +1065,7 @@
           + "\n\nSubtree2: "
           + diff.nodeB.toStringTree();
     }
+    }
     return null;
   }
   @SuppressWarnings("unchecked")
